# Домашнее задание к занятию 5. «Оркестрация кластером Docker контейнеров на примере Docker Swarm»---## Задача 1Дайте письменые ответы на вопросы:- В чём отличие режимов работы сервисов в Docker Swarm-кластере: replication и global?- Какой алгоритм выбора лидера используется в Docker Swarm-кластере?- Что такое Overlay Network?1. **Отличие режимов работы сервисов в Docker Swarm-кластере: replication и global:**   - **Replication (репликация):** В режиме репликации сервис Docker Swarm создает заданное количество реплик контейнеров на разных узлах кластера. Это количество задается при создании сервиса, и Swarm будет стараться поддерживать это количество работающих контейнеров в случае сбоев или масштабирования. Этот режим подходит для stateless-приложений, которым не требуется сохранение состояния между контейнерами.   - **Global (глобальный):** В режиме глобального сервиса Docker Swarm создает по одному экземпляру контейнера на каждом доступном узле кластера. Это обеспечивает наличие копии сервиса на каждом узле, и новые узлы автоматически получают экземпляр сервиса при их присоединении. Этот режим часто используется для stateful-приложений, которым требуется сохранение состояния между экземплярами.2. **Алгоритм выбора лидера в Docker Swarm-кластере:**   В Docker Swarm используется алгоритм выбора лидера, который называется "Raft". Raft — это консенсусный алгоритм, который обеспечивает управление кластером и выбор лидера для координации действий в кластере. Этот алгоритм гарантирует, что только один узел является лидером, и он отвечает за принятие решений относительно создания, масштабирования и управления сервисами в кластере. Если текущий лидер выходит из строя, другие узлы быстро выбирают нового лидера.3. **Overlay Network (Оверлейная сеть):**   Оверлейная сеть в Docker Swarm - это виртуальная сеть, которая автоматически создается и управляется Swarm для обеспечения коммуникации между сервисами и контейнерами в разных узлах кластера. Она предоставляет абстракцию над физическими сетями и позволяет контейнерам в разных узлах обмениваться данными, как если бы они находились в одной локальной сети.   Overlay Network поддерживает изолированные сетевые домены, что означает, что контейнеры в разных сервисах могут использовать одни и те же порты, не конфликтуя друг с другом. Это делает его идеальным для микросервисных приложений и развертывания приложений в распределенных кластерах, таких как Docker Swarm.## Задача 2Создайте ваш первый Docker Swarm-кластер в Яндекс Облаке.Чтобы получить зачёт, предоставьте скриншот из терминала (консоли) с выводом команды:```bashroot@t450s:~# ssh -i .ssh/id_rsa centos@158.160.65.182[centos@node01 ~]$ sudo su -Последний вход в систему:Ср сен  6 06:24:23 UTC 2023на pts/0[root@node01 ~]# docker node lsID                            HOSTNAME             STATUS    AVAILABILITY   MANAGER STATUS   ENGINE VERSION7v6bg9qgvam6ah1q54vs1awo6 *   node01.netology.yc   Ready     Active         Leader           24.0.633ijp1tgdvygygzej9jr4up3k     node02.netology.yc   Ready     Active         Reachable        24.0.6b8qxf0qmasvdwhmla4e6wjgl5     node03.netology.yc   Ready     Active         Reachable        24.0.6w21pfvjo1yyjxjrt5qedc39mo     node04.netology.yc   Ready     Active                          24.0.6ome43oqlmto4qcsrqy6820a5i     node05.netology.yc   Ready     Active                          24.0.6fhsfv1ur313t5ljpgf5vo9kvw     node06.netology.yc   Ready     Active                          24.0.6```## Задача 3Создайте ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.Чтобы получить зачёт, предоставьте скриншот из терминала (консоли), с выводом команды:```bash[root@node01 ~]# docker service lsID             NAME                                MODE         REPLICAS   IMAGE                                          PORTSmyrzuzznww0c   swarm_monitoring_alertmanager       replicated   1/1        stefanprodan/swarmprom-alertmanager:v0.14.0j0e06oiah9kt   swarm_monitoring_caddy              replicated   1/1        stefanprodan/caddy:latest                      *:3000->3000/tcp, *:9090->9090/tcp, *:9093-9094->9093-9094/tcpmcw6j61e6dw7   swarm_monitoring_cadvisor           global       6/6        google/cadvisor:latests9eln9mcwy6f   swarm_monitoring_dockerd-exporter   global       6/6        stefanprodan/caddy:latestz7nx4wmsfwoj   swarm_monitoring_grafana            replicated   1/1        stefanprodan/swarmprom-grafana:5.3.4li9oy00kelx8   swarm_monitoring_node-exporter      global       6/6        stefanprodan/swarmprom-node-exporter:v0.16.0322hjc384ald   swarm_monitoring_prometheus         replicated   1/1        stefanprodan/swarmprom-prometheus:v2.5.0ko8auzle4shd   swarm_monitoring_unsee              replicated   1/1        cloudflare/unsee:v0.8.0```## Задача 4 (*)Выполните на лидере Docker Swarm-кластера команду, указанную ниже, и дайте письменное описание её функционала — что она делает и зачем нужна:```# см.документацию: https://docs.docker.com/engine/swarm/swarm_manager_locking/docker swarm update --autolock=true```