# Домашнее задание к занятию 3. «Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера»---## Задача 1Сценарий выполнения задачи:- создайте свой репозиторий на https://hub.docker.com;- выберите любой образ, который содержит веб-сервер Nginx;- создайте свой fork образа;- реализуйте функциональность:запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:```<html><head>Hey, Netology</head><body><h1>I’m DevOps Engineer!</h1></body></html>```Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.```bashroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker build -t dsa1891/devops25:nginx .Sending build context to Docker daemon  3.072kBStep 1/4 : FROM nginx ---> eea7b3dcba7eStep 2/4 : COPY index.html /usr/share/nginx/html/index.html ---> fdebdfbec7cdStep 3/4 : EXPOSE 80 ---> Running in c97e10cedad6Removing intermediate container c97e10cedad6 ---> 4107dfc11a0cStep 4/4 : CMD ["nginx", "-g", "daemon off;"] ---> Running in d28e2ad99ab1Removing intermediate container d28e2ad99ab1 ---> 045eb7bf8225Successfully built 045eb7bf8225Successfully tagged dsa1891/devops25:nginxroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker push dsa1891/devops25:nginxThe push refers to repository [docker.io/dsa1891/devops25]2b8e32e32262: Pushed563c64030925: Mounted from library/nginx6fb960878295: Mounted from library/nginxe161c3f476b5: Mounted from library/nginx8a7e12012e6f: Mounted from library/nginxd0a62f56ef41: Mounted from library/nginx4713cb24eeff: Mounted from library/nginx511780f88f80: Mounted from library/nginxnginx: digest: sha256:9f9ae20595412ac12556dfdee2c30c71109addbef3c9fe8d607f442670e22207 size: 1985```Сссылка на мой репозитарий [dsa1891/devops25](https://hub.docker.com/r/dsa1891/devops25/tags)## Задача 2Посмотрите на сценарий ниже и ответьте на вопрос:«Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»Детально опишите и обоснуйте свой выбор.--Сценарий:- высоконагруженное монолитное Java веб-приложение;- Nodejs веб-приложение;- мобильное приложение c версиями для Android и iOS;- шина данных на базе Apache Kafka;- Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;- мониторинг-стек на базе Prometheus и Grafana;- MongoDB как основное хранилище данных для Java-приложения;- Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.1. **Высоконагруженное монолитное Java веб-приложение**:   - Лучший выбор: Виртуальная машина. Высоконагруженное приложение требует управления ресурсами, и виртуальные машины обеспечивают более тесное управление этими ресурсами, чем Docker-контейнеры.2. **Node.js веб-приложение**:   - Лучший выбор: Docker. Docker-контейнеры подходят отлично для развертывания Node.js-приложений, так как они обеспечивают легкую изоляцию и упрощают масштабирование.3. **Мобильное приложение с версиями для Android и iOS**:   - Лучший выбор: Физические мобильные устройства или виртуальные машины для эмуляции Android и iOS. Docker не является подходящим для запуска мобильных приложений на устройствах.4. **Шина данных на базе Apache Kafka**:   - Лучший выбор: Виртуальная машина. Apache Kafka лучше работает на виртуальных машинах, предоставляя изоляцию и более надежное управление ресурсами.5. **Elasticsearch-кластер для реализации логирования**:   - Лучший выбор: Виртуальная машина. Elasticsearch требует много ресурсов и изоляции, что лучше достигается с помощью виртуальных машин.6. **Мониторинг-стек на базе Prometheus и Grafana**:   - Лучший выбор: Docker для разработки и тестирования, виртуальная машина для продуктивного использования. Docker упрощает развертывание Prometheus и Grafana в разработке, но в продуктивной среде лучше использовать виртуальные машины для более надежной работы.7. **MongoDB как основное хранилище данных для Java-приложения**:   - Лучший выбор: Виртуальная машина. MongoDB требует управления ресурсами и изоляции, что обеспечивает виртуальная машина.8. **Gitlab-сервер и приватный Docker Registry**:   - Лучший выбор: Docker для Gitlab-сервера и Docker Registry. Docker-контейнеры упрощают развертывание и управление этими компонентами.В целом оптимально использование виртуальных машин для "тяжелых" приложений, которые требуют более гибкого управления ресурсами (I/O в том числе) и изоляции (например, Java-приложение, Kafka, Elasticsearch, MongoDB), и контейнеров для ПО, которое может быть легко изолировано и масштабировано (например, Node.js-приложение, мониторинг-стек, Gitlab-сервер и Docker Registry).Хотя на личном опыте сталкивался с размещением всех компонентов в k8s, включая СУБД и хранение логов, но подход очень спорный.## Задача 3- Запустите первый контейнер из образа ***centos*** c любым тегом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.```bashroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# mkdir dataroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker run -d -v $(pwd)/data:/data --name container1 centos:latest tail -f /dev/nullUnable to find image 'centos:latest' locallylatest: Pulling from library/centosa1d0c7532777: Pull completeDigest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177Status: Downloaded newer image for centos:latest5f63e1cc0bc1dc2f747bef98620aaad68d450c71eaab2b91a545dc35c570e74d```- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.```bashroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker run -d -v $(pwd)/data:/data --name container2 debian:latest tail -f /dev/nullUnable to find image 'debian:latest' locallylatest: Pulling from library/debiande4cac68b616: Pull completeDigest: sha256:b91baba9c2cae5edbe3b0ff50ae8f05157e3ae6f018372dcfc3aba224acb392bStatus: Downloaded newer image for debian:latest7c9491b035785b3f5b0cb7486e0db9f76439c2c5352db98657f0a1821980c00aroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker psCONTAINER ID   IMAGE           COMMAND               CREATED          STATUS          PORTS     NAMES8d1c4d74d783   debian:latest   "tail -f /dev/null"   37 seconds ago   Up 35 seconds             container2796a73002a56   centos:latest   "tail -f /dev/null"   2 minutes ago    Up 2 minutes              container1```- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```.```bashroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker exec -it container1 bash[root@796a73002a56 /]# hostname -f >> /data/textfile1.txt[root@796a73002a56 /]# exitexitroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# cat $(pwd)/data/textfile1.txt796a73002a56```- Добавьте ещё один файл в папку ```/data``` на хостовой машине.```bashroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# echo "Hostfile" > $(pwd)/data/hostfile.txtroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# cat $(pwd)/data/hostfile.txtHostfile```- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.```bashroot@t450s:/home/user1/devops-netology/virt-homeworks/05-virt-03-docker# docker exec -it container2 bashroot@8d1c4d74d783:/# ls /datahostfile.txt  textfile1.txtroot@8d1c4d74d783:/# cat /data/textfile1.txt796a73002a56root@8d1c4d74d783:/# cat /data/hostfile.txtHostfileroot@8d1c4d74d783:/# exitexit```## Задача 4 (*)Воспроизведите практическую часть лекции самостоятельно.Соберите Docker-образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.Ссылка на образ с ansible [dsa1891/devops25:alpine](https://hub.docker.com/layers/dsa1891/devops25/alpine/images/sha256-2d61d8af2836695dc634d4bc816e23e0f24ecd1a9b7d7503f2fa7c6fbd26cca8?context=explore)---